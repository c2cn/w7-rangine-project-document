(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-257a1f22"],{"0a49":function(e,t,a){var i=a("9b43"),r=a("626a"),n=a("4bf8"),s=a("9def"),o=a("cd1c");e.exports=function(e,t){var a=1==e,l=2==e,c=3==e,d=4==e,u=6==e,_=5==e||u,p=t||o;return function(t,o,f){for(var m,h,g=n(t),v=r(g),b=i(o,f,3),y=s(v.length),C=0,k=a?p(t,y):l?p(t,0):void 0;y>C;C++)if((_||C in v)&&(m=v[C],h=b(m,C,g),e))if(a)k[C]=h;else if(h)switch(e){case 3:return!0;case 5:return m;case 6:return C;case 2:k.push(m)}else if(d)return!1;return u?-1:c||d?d:k}}},1169:function(e,t,a){var i=a("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},1259:function(e,t,a){},1962:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"w7-document-chapter"},[a("el-aside",{staticClass:"w7-aside-chapter",attrs:{width:"260px"}},[a("div",{staticClass:"w7-aside-chapter-head"},[a("p",[e._v(e._s(e.docName))])]),a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1),a("div",{staticClass:"icon-box"},[a("el-tooltip",{attrs:{effect:"dark",content:"新建文档",placement:"bottom"}},[a("i",{staticClass:"wq wq-mulu",on:{click:function(t){return e.clickIconAddNode(!1)}}})]),a("el-tooltip",{attrs:{effect:"dark",content:"新建目录",placement:"bottom"}},[a("i",{staticClass:"wq wq-wendang",on:{click:function(t){return e.clickIconAddNode(!0)}}})]),a("el-tooltip",{attrs:{effect:"dark",content:"预览",placement:"bottom"}},[a("i",{staticClass:"wq wq-chakan",on:{click:e.readDoc}})]),e.has_manage?a("el-tooltip",{attrs:{effect:"dark",content:"设置",placement:"bottom"}},[a("i",{staticClass:"wq wq-shezhi1",on:{click:function(t){e.showSetting=!0}}})]):e._e()],1),a("div",{staticClass:"tree-warpper"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"chaptersTree",staticClass:"w7-tree",attrs:{data:e.chapters,props:e.defaultProps,"empty-text":"点击上方按钮创建","node-key":"id","expand-on-click-node":!0,"highlight-current":!0,"default-expanded-keys":e.defaultExpanded,"default-checked-keys":e.defaultCheckedKeys,"filter-node-method":e.filterNode,draggable:"","allow-drop":e.allowDrop},on:{"node-contextmenu":e.rightClick,"node-click":e.handleNodeClick,"node-drop":e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node-info"},[1==r.is_dir?a("i",{staticClass:"wq wq-wendang"}):e._e(),0==r.is_dir?a("i",{staticClass:"wq wq-mulu"}):e._e(),a("div",{staticClass:"text-over"},[a("span",{attrs:{title:i.label}},[e._v(e._s(i.label))])])]),a("span",{staticClass:"shortcut",on:{click:function(t){return t.stopPropagation(),e.shortcut(r,i)}}},[1==r.is_dir?a("i",{staticClass:"wq wq-mulu"}):e._e()]),a("span",{staticClass:"point3",on:{mousemove:e.updateXY,click:function(t){return t.stopPropagation(),e.leftClick(r,i)}}},[a("span",[e._v("...")])]),r.is_default?a("div",{staticClass:"doc-default"}):e._e()])}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.menuBarVisible,expression:"menuBarVisible"}],staticClass:"menu-bar",attrs:{id:"menu-bar"}},[a("ul",{staticClass:"menu"},[1==e.rightSelectNodeObj.is_dir?[a("li",{staticClass:"menu__item",on:{click:function(t){return e.addChildNode(!0)}}},[e._v("创建目录")]),a("li",{staticClass:"menu__item",on:{click:function(t){return e.addChildNode(!1)}}},[e._v("创建文档")]),a("li",{staticClass:"menu__item",on:{click:function(t){return e.updateNode(!0)}}},[e._v("重命名")]),a("li",{staticClass:"menu__item",on:{click:function(t){return e.openMoveDialog(!0)}}},[e._v("移动")]),a("li",{staticClass:"menu__item",on:{click:e.removeNode}},[e._v("删除")])]:e._e(),0==e.rightSelectNodeObj.is_dir?[a("li",{staticClass:"menu__item",on:{click:function(t){return e.updateNode(!1)}}},[e._v("重命名")]),a("li",{staticClass:"menu__item",on:{click:function(t){return e.copyNode()}}},[e._v("复制文档")]),a("li",{staticClass:"menu__item",on:{click:function(t){return e.openMoveDialog(!1)}}},[e._v("移动")]),a("li",{staticClass:"menu__item",on:{click:e.removeNode}},[e._v("删除")])]:e._e()],2)])],1)],1)]),a("el-main",{},[e.isDocEmpty?a("div",[e._v("尚未创建文档")]):[a("div",{staticClass:"chapter-title"},[e._v(e._s(e.docTitle))]),1==e.layout?a("div",{staticClass:"api"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100"}},[a("div",{staticClass:"basic-information api-con"},[a("div",{staticClass:"top"},[a("div",{staticClass:"line-wrap"},[a("span",{staticClass:"line"}),a("span",{staticClass:"text"},[e._v("基本信息")])])]),a("div",{staticClass:"c-con"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:4}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.method,callback:function(t){e.$set(e.form,"method",t)},expression:"form.method"}},e._l(e.methodArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{md:10}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请求地址，如：api/test"},on:{input:e.urlChange},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:14}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请在此输入接口描述内容"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:14}},[a("el-form-item",{staticClass:"mock-api",attrs:{label:"Mock Api地址"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","popper-class":"mock-api-tip",content:"点击复制链接",placement:"top"}},[a("el-input",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.mockApiUrl,expression:"mockApiUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],attrs:{readonly:"",placeholder:""},model:{value:e.mockApiUrl,callback:function(t){e.mockApiUrl=t},expression:"mockApiUrl"}})],1)],1)],1)],1)],1)]),a("div",{staticClass:"api-con"},[a("div",{staticClass:"top"},[a("div",{staticClass:"line-wrap"},[a("span",{staticClass:"line"}),a("span",{staticClass:"text"},[e._v("请求数据")])]),e._e(),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-view"},on:{click:e.viewRequestMock}},[e._v("预览")])],1),a("div",{staticClass:"c-con"},[a("el-tabs",{on:{"tab-click":e.tabRequest},model:{value:e.form.tab_location,callback:function(t){e.$set(e.form,"tab_location",t)},expression:"form.tab_location"}},[a("el-tab-pane",{key:"header",attrs:{label:"请求头Header",name:"1"}},[a("div",{staticClass:"tree-wrap"},[a("el-tree",{attrs:{data:e.apiHeaderTreeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return a("div",{staticClass:"custom-tree-node"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"参数名"},on:{input:function(t){return e.paramNameChange(i,r)}},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"data.name"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:""},on:{change:function(t){return e.typeChange(r)}},model:{value:r.type,callback:function(t){e.$set(r,"type",t)},expression:"data.type"}},e._l(e.paramsArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"是否必填"},model:{value:r.enabled,callback:function(t){e.$set(r,"enabled",t)},expression:"data.enabled"}},[a("el-option",{attrs:{label:"true",value:2}}),a("el-option",{attrs:{label:"false",value:1}})],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{staticClass:"rule-question",attrs:{label:""}},[a("el-input",{attrs:{placeholder:"生成规则"},model:{value:r.rule,callback:function(t){e.$set(r,"rule",t)},expression:"data.rule"}}),e.apiHeaderTreeData&&e.apiHeaderTreeData[0].id==r.id?a("i",{staticClass:"wq wq-wenhao rule-icon",on:{click:e.goMock}}):e._e()],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{disabled:4==r.type,placeholder:"默认值"},model:{value:r.default_value,callback:function(t){e.$set(r,"default_value",t)},expression:"data.default_value"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"描述"},model:{value:r.description,callback:function(t){e.$set(r,"description",t)},expression:"data.description"}})],1)],1),a("span",{staticClass:"add",on:{click:function(){return e.addApiTreeNode(r)}}},[a("span",{staticClass:"iconfont wq-add"})]),a("span",{staticClass:"delete",on:{click:function(){return e.removeApiTreeNode(i,r)}}},[a("span",{staticClass:"iconfont wq-delete"})]),a("span",{staticClass:"delete",on:{click:function(){return e.insertAfter(i,r)}}})],1)],1)}}],null,!1,3821251820)})],1)]),a("el-tab-pane",{key:"params",attrs:{label:"Query Params",name:"2"}},[a("div",{staticClass:"tree-wrap"},[a("el-tree",{attrs:{data:e.apiParamsTreeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return a("div",{staticClass:"custom-tree-node"},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"参数名"},on:{input:function(t){return e.paramNameChange(i,r)}},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"data.name"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:""},on:{change:function(t){return e.typeChange(r)}},model:{value:r.type,callback:function(t){e.$set(r,"type",t)},expression:"data.type"}},e._l(e.paramsArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"是否必填"},model:{value:r.enabled,callback:function(t){e.$set(r,"enabled",t)},expression:"data.enabled"}},[a("el-option",{attrs:{label:"true",value:2}}),a("el-option",{attrs:{label:"false",value:1}})],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{staticClass:"rule-question",attrs:{label:""}},[a("el-input",{attrs:{placeholder:"生成规则"},model:{value:r.rule,callback:function(t){e.$set(r,"rule",t)},expression:"data.rule"}}),e.apiParamsTreeData&&e.apiParamsTreeData[0].id==r.id?a("i",{staticClass:"wq wq-wenhao rule-icon",on:{click:e.goMock}}):e._e()],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{disabled:4==r.type,placeholder:"默认值"},model:{value:r.default_value,callback:function(t){e.$set(r,"default_value",t)},expression:"data.default_value"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"描述"},model:{value:r.description,callback:function(t){e.$set(r,"description",t)},expression:"data.description"}})],1)],1),a("span",{staticClass:"add",on:{click:function(){return e.addApiTreeNode(r)}}},[a("span",{staticClass:"iconfont wq-add"})]),a("span",{staticClass:"delete",on:{click:function(){return e.removeApiTreeNode(i,r)}}},[a("span",{staticClass:"iconfont wq-delete"})]),a("span",{staticClass:"delete",on:{click:function(){return e.insertAfter(i,r)}}})],1)],1)}}],null,!1,1559812159)})],1)]),a("el-tab-pane",{key:"body",attrs:{label:"请求参数（Body）",name:"3"}},[a("div",{staticClass:"type-body"},[a("el-form-item",{attrs:{label:"请求类型："}},[a("el-radio-group",{model:{value:e.form.body_param_location,callback:function(t){e.$set(e.form,"body_param_location",t)},expression:"form.body_param_location"}},[a("el-radio",{attrs:{label:3}},[e._v("form-data")]),a("el-radio",{attrs:{label:4}},[e._v("x-www-form-urlencoded")]),a("el-radio",{attrs:{label:5}},[e._v("raw")]),a("el-radio",{attrs:{label:6}},[e._v("binary")])],1)],1),a("div",{staticClass:"tree-wrap"},[a("el-tree",{attrs:{data:e.apiBodyTreeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return a("div",{staticClass:"custom-tree-node"},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"参数名"},on:{input:function(t){return e.paramNameChange(i,r)}},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"data.name"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:""},on:{change:function(t){return e.typeChange(r)}},model:{value:r.type,callback:function(t){e.$set(r,"type",t)},expression:"data.type"}},e._l(e.paramsArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"是否必填"},model:{value:r.enabled,callback:function(t){e.$set(r,"enabled",t)},expression:"data.enabled"}},[a("el-option",{attrs:{label:"true",value:2}}),a("el-option",{attrs:{label:"false",value:1}})],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{staticClass:"rule-question",attrs:{label:""}},[a("el-input",{attrs:{placeholder:"生成规则"},model:{value:r.rule,callback:function(t){e.$set(r,"rule",t)},expression:"data.rule"}}),e.apiBodyTreeData&&e.apiBodyTreeData[0].id==r.id?a("i",{staticClass:"wq wq-wenhao rule-icon",on:{click:e.goMock}}):e._e()],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{disabled:4==r.type,placeholder:"默认值"},model:{value:r.default_value,callback:function(t){e.$set(r,"default_value",t)},expression:"data.default_value"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"描述"},model:{value:r.description,callback:function(t){e.$set(r,"description",t)},expression:"data.description"}})],1)],1),a("span",{staticClass:"add",on:{click:function(){return e.addApiTreeNode(r)}}},[a("span",{staticClass:"iconfont wq-add"})]),a("span",{staticClass:"delete",on:{click:function(){return e.removeApiTreeNode(i,r)}}},[a("span",{staticClass:"iconfont wq-delete"})]),a("span",{staticClass:"delete",on:{click:function(){return e.insertAfter(i,r)}}})],1)],1)}}],null,!1,4238393215)})],1)],1)])],1)],1),e.isViewRequest?a("div",{staticClass:"c-bottom"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"mock"},[a("div",{staticClass:"m-tit"},[e._v("请求模板")]),a("div",{staticClass:"m-con",style:{height:e.requestMockHeight+"px"}},[a("pre",{ref:"requestMockLeftHeight"},[e._v(e._s(e.requestMockTemplate))])])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"mock"},[a("div",{staticClass:"m-tit"},[e._v("请求数据 "),a("i",{staticClass:"el-icon-refresh",on:{click:e.refreshRequestMock}})]),a("div",{staticClass:"m-con",style:{height:e.requestMockHeight+"px"}},[a("pre",{ref:"requestMockRightHeight"},[e._v(e._s(e.requestMockJson))])])])])],1)],1):e._e()]),a("div",{staticClass:"api-con response-api"},[a("div",{staticClass:"top"},[a("div",{staticClass:"line-wrap"},[a("span",{staticClass:"line"}),a("span",{staticClass:"text"},[e._v("响应数据")]),a("el-button",{attrs:{type:"default",size:"mini",icon:"el-icon-plus"},on:{click:e.addResNode}},[e._v("添加")])],1),e._e(),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-view"},on:{click:e.viewResponseMock}},[e._v("预览")])],1),e._l(e.apiResTreeData,(function(t,i){return a("div",{key:i,staticClass:"c-con"},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:15}},[a("div",{staticStyle:{"padding-left":"24px"}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"calc(100% + 5px)"},attrs:{placeholder:"响应数据描述"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1)],1)]),a("el-col",{attrs:{span:9}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteApiItem(i)}}},[e._v("删除")])],1)])],1),a("el-tree",{attrs:{data:t.data,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.node,s=r.data;return a("div",{staticClass:"custom-tree-node"},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"参数名"},on:{input:function(t){return e.resParamNameChange(n,s)}},model:{value:s.name,callback:function(t){e.$set(s,"name",t)},expression:"data.name"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:""},on:{change:function(t){return e.typeChange(s)}},model:{value:s.type,callback:function(t){e.$set(s,"type",t)},expression:"data.type"}},e._l(e.paramsArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{staticClass:"rule-question",attrs:{label:""}},[a("el-input",{attrs:{placeholder:"生成规则"},model:{value:s.rule,callback:function(t){e.$set(s,"rule",t)},expression:"data.rule"}}),t.data[0].id==s.id?a("i",{staticClass:"wq wq-wenhao rule-icon",on:{click:e.goMock}}):e._e()],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{disabled:4==s.type,placeholder:"默认值"},model:{value:s.default_value,callback:function(t){e.$set(s,"default_value",t)},expression:"data.default_value"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"描述"},model:{value:s.description,callback:function(t){e.$set(s,"description",t)},expression:"data.description"}})],1)],1),a("span",{staticClass:"add",on:{click:function(){return e.addResApiTreeNode(s)}}},[a("span",{staticClass:"iconfont wq-add"})]),a("span",{staticClass:"delete",on:{click:function(){return e.removeResApiTreeNode(n,s,i)}}},[a("span",{staticClass:"iconfont wq-delete"})]),a("span",{staticClass:"delete",on:{click:function(){return e.insertAfter(n,s)}}})],1)],1)}}],null,!0)})],1)})),e.isViewResponse?a("div",{staticClass:"c-bottom"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"mock"},[a("div",{staticClass:"m-tit"},[e._v("响应模板")]),a("div",{staticClass:"m-con",style:{height:e.responseMockHeight+"px"}},[a("div",{ref:"responseMockLeftHeight"},e._l(e.responseMockTemplate,(function(t,i){return a("div",{key:i,style:{"margin-top":i>0?"30px":""}},[a("div",{staticStyle:{"margin-bottom":"10px","font-size":"12px"}},[e._v("响应"+e._s(e.apiResTreeData[i].description)+"：")]),a("pre",[e._v(e._s(t))])])})),0)])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"mock"},[a("div",{staticClass:"m-tit"},[e._v("响应数据 "),a("i",{staticClass:"el-icon-refresh",on:{click:e.refreshResponseMock}})]),a("div",{staticClass:"m-con",style:{height:e.responseMockHeight+"px"}},[a("div",{ref:"responseMockRightHeight"},e._l(e.responseMockJson,(function(t,i){return a("div",{key:i,style:{"margin-top":i>0?"30px":""}},[a("div",{staticStyle:{"margin-bottom":"10px","font-size":"12px"}},[e._v("响应"+e._s(e.apiResTreeData[i].description)+":")]),a("pre",[e._v(e._s(t))])])})),0)])])])],1)],1):e._e()],2)])],1):e._e(),a("editors",{attrs:{markDownContent:e.markDownContent,chapter_id:e.chapter_id,chapterIsDir:e.selectNodeObj.is_dir},model:{value:e.markDownContent,callback:function(t){e.markDownContent=t},expression:"markDownContent"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.saveApi}},[e._v("保存")])]],2),a("el-dialog",{staticClass:"we7-dialog only-input-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.addNodeObj,"label-width":"105px","label-position":"left"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.dialogFormLabel}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmBtn(t)}},model:{value:e.addNodeObj.name,callback:function(t){e.$set(e.addNodeObj,"name",t)},expression:"addNodeObj.name"}})],1),1!=e.addNodeObj.is_dir?a("el-form-item",{attrs:{label:"文档类型"}},[a("el-radio-group",{model:{value:e.addNodeObj.layout,callback:function(t){e.$set(e.addNodeObj,"layout",t)},expression:"addNodeObj.layout"}},[a("el-radio",{attrs:{label:0}},[e._v("普通文档")]),a("el-radio",{attrs:{label:1}},[e._v("API文档")])],1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.confirmDisabled},on:{click:e.confirmBtn}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{staticClass:"we7-dialog",attrs:{title:e.dialogMoveTitle,visible:e.dialogMoveVisible,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogMoveVisible=t}}},[a("el-form",{attrs:{"label-width":"105px","label-position":"left"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{attrs:{placeholder:"请输入文档名称进行搜索",filterable:"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{change:e.changeDoc},model:{value:e.moveDoc,callback:function(t){e.moveDoc=t},expression:"moveDoc"}},e._l(e.docList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"分类"}},[a("el-cascader",{attrs:{options:e.docChapters,props:{value:"id",label:"name"},clearable:!0,"change-on-select":!0},model:{value:e.moveClass,callback:function(t){e.moveClass=t},expression:"moveClass"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.moveNode}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogMoveVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{staticClass:"we7-dialog only-input-dialog",attrs:{title:"复制章节",visible:e.dialogVisibleCopy,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogVisibleCopy=t}}},[a("el-form",{attrs:{"label-width":"105px","label-position":"left"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"文档名称"}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmBtnCopy(t)}},model:{value:e.copyNodeName,callback:function(t){e.copyNodeName=t},expression:"copyNodeName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.confirmCopyDisabled},on:{click:e.confirmBtnCopy}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogVisibleCopy=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{staticClass:"we7-dialog dialog-setting",attrs:{title:"项目设置",width:"1000px",visible:e.showSetting,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.showSetting=t}}},[a("setting",{attrs:{id:e.$route.params.id}})],1)],1)},r=[],n=a("5aed"),s=n["a"],o=(a("9459"),a("3d54"),a("2877")),l=Object(o["a"])(s,i,r,!1,null,"65079793",null);t["default"]=l.exports},"1c4c":function(e,t,a){"use strict";var i=a("9b43"),r=a("5ca1"),n=a("4bf8"),s=a("1fa8"),o=a("33a4"),l=a("9def"),c=a("f1ae"),d=a("27ee");r(r.S+r.F*!a("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,r,u,_=n(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,h=void 0!==m,g=0,v=d(_);if(h&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==v||p==Array&&o(v))for(t=l(_.length),a=new p(t);t>g;g++)c(a,g,h?m(_[g],g):_[g]);else for(u=v.call(_),a=new p;!(r=u.next()).done;g++)c(a,g,h?s(u,m,[r.value,g],!0):r.value);return a.length=g,a}})},"20d6":function(e,t,a){"use strict";var i=a("5ca1"),r=a("0a49")(6),n="findIndex",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"37c8":function(e,t,a){t.f=a("2b4c")},"3a72":function(e,t,a){var i=a("7726"),r=a("8378"),n=a("2d00"),s=a("37c8"),o=a("86cc").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=n?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},"3d54":function(e,t,a){"use strict";var i=a("ce4d"),r=a.n(i);r.a},"456d":function(e,t,a){var i=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(e){return r(i(e))}}))},"5aed":function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ac4d"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("8a81"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5df3"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1c4c"),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8e6e"),core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("20d6"),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9__),C_www_Doc_document_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ade3"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_15__),vuex__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("2f62"),_api_api__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("4ec3"),_editors_vue__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("f93f"),_setting_vue__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("49f7");function _createForOfIteratorHelper(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){Object(C_www_Doc_document_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var id=1e3;function treeToTemplate(tree){var num=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;function parse(item,result){var rule=item.rule?"|"+item.rule:"",value=item.default_value;if(item.default_value&&0===item.default_value.indexOf("[")&&"]"===item.default_value.substring(item.default_value.length-1))try{var reg=/\s*/g,reg2=/\"/g;value=value.substring(1,value.length-1).replace(reg,"").replace(reg2,"").split(","),result[item.name+rule]=value}catch(e){result[item.name+rule]=value}else if(item.name.length)switch(item.type){case 1:result[item.name+rule]=value;break;case 2:""===value&&(value=1);var parsed=parseFloat(value);isNaN(parsed)||(value=parsed),result[item.name+rule]=value;break;case 3:"true"===value&&(value=!0),"false"===value&&(value=!1),"0"===value&&(value=!1),value=!!value,result[item.name+rule]=value;break;case 4:result[item.name+rule]={},item.children.forEach((function(e){parse(e,result[item.name+rule])}));break;case 5:if(value)try{result[item.name+rule]=value}catch(e){result[item.name+rule]=item.value}else result[item.name+rule]=item.children.length?[{}]:[],item.children.forEach((function(e){parse(e,result[item.name+rule][0])}));break;case 6:if(1==num)try{var fun=eval(item.default_value);result[item.name+rule]=fun()}catch(e){result[item.name+rule]=item.default_value}else result[item.name+rule]=value;break;case 7:if(1==num)try{result[item.name+rule]=new RegExp(item.default_value)}catch(e){result[item.name+rule]=item.default_value}else{var _reg=/\\/g;result[item.name+rule]=item.default_value.replace(_reg,"")}break;case 8:result[item.name+rule]=null;break}}var result={};return tree.length&&tree.forEach((function(e){parse(e,result)})),result}function romoveSlash(e){var t={},a=/\//g;for(var i in e)"string"==typeof e[i]&&a.test(e[i])?t[i]=e[i].replace(a,""):t[i]=e[i];return t}__webpack_exports__["a"]={name:"chapter",components:{editors:_editors_vue__WEBPACK_IMPORTED_MODULE_18__["a"],setting:_setting_vue__WEBPACK_IMPORTED_MODULE_19__["a"]},data:function(){return{isHeaderLast:!0,docName:"",docTitle:"",defaultCheckedKeys:[],layout:"",has_manage:!0,filterText:"",chapters:[],defaultProps:{children:"children",label:"name"},defaultExpanded:[],defaultSelect:"",menuBarVisible:!1,clientX:"",clientY:"",selectNodeObj:{},rightSelectNodeObj:{},rightSelectNode:{},addFirst:!0,addNodeObj:{name:"",is_dir:1,layout:0},dialogTitle:"",dialogFormLabel:"",dialogVisible:!1,dialogMoveVisible:!1,dialogMoveTitle:"",moveDoc:"",moveClass:"",docList:[],docChapters:[],showSetting:!1,dialogVisibleCopy:!1,copyNodeName:"",methodArr:[],paramsArr:[{type:"String",value:1},{type:"Number",value:2},{type:"Boolean",value:3},{type:"Object",value:4},{type:"Array",value:5},{type:"Function",value:6},{type:"RegExp",value:7},{type:"Null",value:8}],form:{method:1,url:"",description:"",body_param_location:3,tab_location:"1"},formCompared:{},formCopy:{method:1,url:"",description:"",body_param_location:3,tab_location:"1"},baseRequestData:{already:0,isChecked:!1,name:"",type:1,enabled:2,default_value:"",description:"",rule:"",children:[]},markDownContent:"",apiHeaderTreeData:[],apiParamsTreeData:[],apiBodyTreeData:[],apiResTreeData:[],apiResTreeDataCopy:[{already:0,isChecked:!1,name:"",type:1,enabled:2,default_value:"",description:"",rule:"",children:[]}],chapter_id:"",isDocEmpty:!1,previewId:"",loading:"",confirmDisabled:!1,confirmCopyDisabled:!1,apiHeaderTreeDataCompared:"",apiParamsTreeDataCompared:"",apiBodyTreeDataCompared:"",apiResTreeDataCompared:"",markDownContentCompared:"",isSave:!0,isFormChange:!1,isApiHeaderTreeDataChange:!1,isApiParamsTreeDataChange:!1,isApiBodyTreeDataChange:!1,isApiResTreeDataChange:!1,isMarkDownContentChange:!1,treeActive:!1,isViewRequest:!1,isViewResponse:!1,requestMockTemplate:"",requestMockJson:"",responseMockTemplate:"",responseMockJson:"",requestMockHeight:"",responseMockHeight:"",mockApiUrl:"",mockApiUrl2:"",isDelete:!1}},computed:_objectSpread({},Object(vuex__WEBPACK_IMPORTED_MODULE_16__["b"])({UserInfo:"UserInfo"})),watch:{filterText:function(e){this.$refs.chaptersTree.filter(e)},dialogVisible:function(e){e&&setTimeout((function(){document.querySelector(".only-input-dialog .el-input__inner").focus()}),300)},UserInfo:function(e){e&&this.getOperRecord()},markDownContent:{deep:!0,handler:function(e,t){var a=JSON.stringify(e),i=JSON.stringify(this.markDownContentCompared);this.isMarkDownContentChange=a!=i}},form:{deep:!0,immediate:!1,handler:function(e,t){var a=JSON.parse(JSON.stringify(e));delete a.tab_location;var i="";i=a.url?JSON.stringify(a):'""';var r=JSON.parse(JSON.stringify(this.formCompared));delete r.tab_location;var n=JSON.stringify(r);this.isFormChange=i!=n}},apiHeaderTreeData:{deep:!0,immediate:!1,handler:function(e){if(e){var t=JSON.parse(JSON.stringify(e)),a="";t.length&&(t.forEach((function(e){delete e.already})),t=t.filter((function(e){return e.name||e.description})),a=t.length?JSON.stringify(t):'""');var i=JSON.parse(JSON.stringify(this.apiHeaderTreeDataCompared)),r=JSON.stringify(i);this.isApiHeaderTreeDataChange=a!=r}}},apiParamsTreeData:{deep:!0,immediate:!1,handler:function(e){if(e){var t=JSON.parse(JSON.stringify(e)),a="";t.length&&(t.forEach((function(e){delete e.already})),t=t.filter((function(e){return e.name||e.description})),a=t.length?JSON.stringify(t):'""');var i=JSON.parse(JSON.stringify(this.apiParamsTreeDataCompared)),r=JSON.stringify(i);this.isApiParamsTreeDataChange=a!=r}}},apiBodyTreeData:{deep:!0,immediate:!1,handler:function(e){if(e){var t=JSON.parse(JSON.stringify(e)),a="";t.length&&(t.forEach((function(e){delete e.already})),t=t.filter((function(e){return e.name||e.description})),a=t.length?JSON.stringify(t):'""');var i=JSON.parse(JSON.stringify(this.apiBodyTreeDataCompared)),r=JSON.stringify(i);this.isApiBodyTreeDataChange=a!=r}}},apiResTreeData:{deep:!0,immediate:!1,handler:function(e){if(e){var t=JSON.parse(JSON.stringify(e));t.length&&0==t[0].already&&(t=t.filter((function(e){return e.name||e.description}))),t.length?t.forEach((function(e){e.data&&e.data.length&&(e.data.forEach((function(e){delete e.already})),e.data=e.data.filter((function(e){return e.name||e.description})))})):t=[{description:"",data:[]}];var a="";a=JSON.stringify(t);var i=JSON.parse(JSON.stringify(this.apiResTreeDataCompared)),r=JSON.stringify(i);this.isApiResTreeDataChange=a!=r}}}},created:function(){this.$route.query&&"add"==this.$route.query.type?this.clickIconAddNode(!0):(this.UserInfo&&this.getOperRecord(),this.getChapters()),this.getMethodType(),this.mockApiUrl=location.origin+"/document/mockApiReponse/".concat(this.$route.params.id)+"/"},mounted:function(){var e=this;document.addEventListener("keydown",(function(t){var a=0;t=t||event||window.event,a=t.keyCode||t.which||t.charCode,(t.ctrlKey||t.metaKey)&&83==a&&(t.preventDefault(),e.saveApi())}))},beforeRouteLeave:function(e,t,a){var i=this;this.isFormChange||this.isApiHeaderTreeDataChange||this.isApiParamsTreeDataChange||this.isApiBodyTreeDataChange||this.isApiResTreeDataChange||this.isMarkDownContentChange?this.$confirm("您有数据尚未保存，确认保存?","提示",{showClose:!1,closeOnClickModal:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){i.saveApi()})).catch((function(){i.$message({type:"info",message:"已取消"}),a()})):a()},methods:{urlChange:function(){this.mockApiUrl=location.origin+"/document/mockApiReponse/".concat(this.$route.params.id)+"/"+this.form.url},initCreateChapter:function(){var e=this;Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["a"])({document_id:this.$route.params.id,parent_id:0,is_dir:1,layout:0,name:"默认目录"}).then((function(t){e.chapter_id=t.data.id;var a=t.data;if(e.addFirst)e.chapters.push(a);else{var i=e.rightSelectNodeObj;i.children||e.$set(i,"children",[]),i.children.push(a)}e.$nextTick((function(){e.$refs.chaptersTree.setCurrentKey(a.id),e.handleNodeClick(e.$refs.chaptersTree.getCurrentNode());var t=JSON.parse(localStorage.getItem("we7_doc_user_"+e.UserInfo.id)),i=t["document_"+e.$route.params.id];e.defaultExpanded=i.defaultExpanded,e.defaultExpanded.push(a.id)}))})).catch((function(){}))},getOperRecord:function(){var e="we7_doc_user_"+this.UserInfo.id,t=JSON.parse(localStorage.getItem(e)),a="document_"+this.$route.params.id,i={};i[a]={defaultExpanded:[],defaultSelect:""},t?t[a]?(this.defaultExpanded=t[a].defaultExpanded,this.defaultSelect=t[a].defaultSelect):(t[a]={defaultExpanded:[],defaultSelect:""},localStorage.setItem(e,JSON.stringify(t))):localStorage.setItem(e,JSON.stringify(i))},setOperRecord:function(e){var t=this.$route.query.type,a=this.$route.params.id;if("add"==t){var i={};i["document_"+a]={defaultExpanded:[],defaultSelect:""},localStorage.setItem("we7_doc_user_"+this.UserInfo.id,JSON.stringify(i))}else{var r=JSON.parse(localStorage.getItem("we7_doc_user_"+this.UserInfo.id)),n=r["document_"+this.$route.params.id];e.is_dir,n.defaultSelect=e.id,localStorage.setItem("we7_doc_user_"+this.UserInfo.id,JSON.stringify(r))}},getChapters:function(){var e=this;Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["c"])({document_id:this.$route.params.id}).then((function(t){if(200==t.code){var a="";if(localStorage["currentData_"+e.$route.params.id]&&(a=JSON.parse(localStorage["currentData_"+e.$route.params.id])),0==t.data.catalog)e.isDocEmpty=!0;else if(t.data.catalog&&!a){var i=function a(i){if(i.length){var r,n=_createForOfIteratorHelper(i);try{for(n.s();!(r=n.n()).done;){var s=r.value;try{if(s.is_dir&&s.children.length)return a(s.children),!1;if(!s.is_dir)return e.isDocEmpty=!1,e.chapters=e.initTreeData(t.data.catalog),e.handleNodeClick(s),e.defaultExpanded=[s.parent_id],!1;e.isDocEmpty=!0,e.docName=t.data.document.name,e.has_manage=t.data.acl.has_manage,e.chapters=e.initTreeData(t.data.catalog)}catch(o){}}}catch(l){n.e(l)}finally{n.f()}}};t.data.catalog.length&&i(t.data.catalog)}else e.isDocEmpty=!1,e.docName=t.data.document.name,e.has_manage=t.data.acl.has_manage,e.chapters=e.initTreeData(t.data.catalog),a?e.$nextTick((function(){if(e.$refs.chaptersTree.setCurrentKey(a.id),null!=e.$refs.chaptersTree.getCurrentNode()){e.handleNodeClick(e.$refs.chaptersTree.getCurrentNode());var i=JSON.parse(localStorage.getItem("we7_doc_user_"+e.UserInfo.id)),r=i["document_"+e.$route.params.id];e.defaultExpanded=r.defaultExpanded,e.defaultExpanded.push(e.$refs.chaptersTree.getCurrentNode().id)}else{e.$refs.chaptersTree.setCurrentKey(t.data.catalog[0].id),e.handleNodeClick(t.data.catalog[0]);var n=JSON.parse(localStorage.getItem("we7_doc_user_"+e.UserInfo.id)),s=n["document_"+e.$route.params.id];e.defaultExpanded=s.defaultExpanded,e.defaultExpanded.push(t.data.catalog[0])}})):e.$nextTick((function(){e.$refs.chaptersTree.setCurrentKey(t.data.catalog[0].id),e.handleNodeClick(t.data.catalog[0])}))}}))},initTreeData:function(e){function t(e,a){for(var i=0;i<e.length;i++)e[i].is_dir?t(e[i].children,e[i].default_show_chapter_id):e[i]["is_default"]=e[i].default_show_chapter_id==e[i].id||e[i].id==a}return t(e),e},readDoc:function(){var e=this.$router.resolve({path:"/chapter/"+this.$route.params.id,query:{id:this.previewId}});window.open(e.href,"_blank")},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e){var t=this;if(this.isViewRequest=!1,this.isViewResponse=!1,e.is_dir){var a=this.$route.params.id;if(localStorage["currentData_"+a]){var i=JSON.parse(localStorage["currentData_"+a]);this.defaultCheckedKeys=[i.id]}else{var r=function e(t){if(t.length){var a,i=_createForOfIteratorHelper(t);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(!r.is_dir)return n.defaultCheckedKeys=[r.id],!1;e(r.children)}}catch(s){i.e(s)}finally{i.f()}}},n=this;r(this.chapters)}this.$nextTick((function(){$(".w7-tree .is-current").find(".el-tree-node__children").length,$(".w7-tree .is-current").find(".el-tree-node__children .el-tree-node").length;var e=$(".w7-tree .is-current").prop("aria-expanded");if(localStorage["currentData_"+t.$route.params.id])e&&$(".w7-tree .is-current").attr("data-active","");else{var a=$(".w7-tree .is-current").prop("aria-expanded");a&&$(".w7-tree .is-checked").attr("data-active","tree-active")}}))}else{this.$nextTick((function(){t.isDelete||$(".w7-tree .el-tree-node").removeClass("is-checked").attr({"data-active":""}),t.isDelete=!1}));var s=this.$route.params.id;if(localStorage["currentData_"+s]=JSON.stringify(e),this.isFormChange||this.isApiHeaderTreeDataChange||this.isApiParamsTreeDataChange||this.isApiBodyTreeDataChange||this.isApiResTreeDataChange||this.isMarkDownContentChange)return this.$confirm("您有数据尚未保存，确认保存?","提示",{showClose:!1,closeOnClickModal:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.saveApi(),t.isFormChange=!1,t.isApiHeaderTreeDataChange=!1,t.isApiParamsTreeDataChange=!1,t.isApiBodyTreeDataChange=!1,t.isApiResTreeDataChange=!1,t.isMarkDownContentChange=!1,t.getOperRecord()})).catch((function(){t.$message({type:"info",message:"已取消"}),t.isFormChange=!1,t.isApiHeaderTreeDataChange=!1,t.isApiParamsTreeDataChange=!1,t.isApiBodyTreeDataChange=!1,t.isApiResTreeDataChange=!1,t.isMarkDownContentChange=!1,t.previewId=e.id,t.docTitle=e.name,t.chapter_id=e.id,t.viewChapter(),t.treeActive=!0,t.menuBarVisible&&(t.menuBarVisible=!1),t.selectNodeObj=e,t.setOperRecord(e),t.$nextTick((function(){$(".w7-tree .is-current").attr("data-active","tree-active")}))})),!1;this.previewId=e.id,this.docTitle=e.name,this.chapter_id=e.id,this.selectNodeObj=e,this.viewChapter(),this.treeActive=!0,this.menuBarVisible&&(this.menuBarVisible=!1),this.setOperRecord(e),this.$nextTick((function(){var e=$(".w7-tree .is-current").find(".el-tree-node__children").length,t=$(".w7-tree .is-current").find(".el-tree-node__children .el-tree-node").length;(0==e||e>0)&&0==t&&setTimeout((function(){var e=$(".w7-tree .is-current").prop("aria-expanded"),t=$(".w7-tree .is-checked").prop("aria-expanded");e||$(".w7-tree .is-current").attr("data-active","tree-active"),t||$(".w7-tree .is-checked:last").attr("data-active","tree-active")}),600)}))}},updateXY:function(e){this.clientX=e.clientX,this.clientY=e.clientY},shortcut:function(e,t){this.rightSelectNodeObj=e,this.rightSelectNode=t,this.addChildNode(!1)},leftClick:function(e,t){1!=this.menuBarVisible?this.rightClick(!1,e,t):this.menuBarVisible=!1},rightClick:function(e,t,a){var i=this;this.rightSelectNodeObj=t,this.rightSelectNode=a,this.menuBarVisible=!1,this.menuBarVisible=!0,this.$nextTick((function(){var t=document.querySelector("#menu-bar"),a=window.innerHeight,r=t.offsetHeight;e?(a-e.clientY>r?(t.style.top=e.clientY+20+"px",t.className="menu-bar bottom"):(t.style.top=e.clientY-r-10+"px",t.className="menu-bar top"),t.style.left=e.clientX-50+"px"):(a-i.clientY>r?(t.style.top=i.clientY+20+"px",t.className="menu-bar bottom"):(t.style.top=i.clientY-r-20+"px",t.className="menu-bar top"),t.style.left=i.clientX-50+"px")})),document.addEventListener("click",this.removeRightClickEvent)},removeRightClickEvent:function(){this.menuBarVisible=!1,document.removeEventListener("click",this.removeRightClickEvent)},clickIconAddNode:function(e){this.addFirst=!0,this.dialogTitle=e?"新建目录":"新建文档",this.dialogFormLabel=e?"目录名称":"文档名称",this.addNodeObj.name="",this.addNodeObj.is_dir=e?1:0,this.addNodeObj.layout=e?0:1,this.dialogVisible=!0,this.rightSelectNode={},this.rightSelectNodeObj={}},updateNode:function(e){this.dialogTitle="重命名",localStorage.rename=this.rightSelectNodeObj.name,this.addNodeObj.name=this.rightSelectNodeObj.name,this.dialogFormLabel=e?"新的目录名称":"新的文档名称",this.dialogVisible=!0},copyNode:function(){this.copyNodeName=this.rightSelectNodeObj.name,this.dialogVisibleCopy=!0},addChildNode:function(e){this.addFirst=!1,5==this.rightSelectNode.level&&e?this.$message("第五级只能为文档！"):(this.dialogTitle=e?"新建目录":"新建文档",this.dialogFormLabel=e?"目录名称":"文档名称",this.addNodeObj.name="",this.addNodeObj.is_dir=e?1:0,this.dialogVisible=!0)},confirmBtnCopy:function(){var e=this;this.copyNodeName?(this.confirmCopyDisabled=!0,this.$post("/admin/chapter/copy",{document_id:this.$route.params.id,chapter_id:this.rightSelectNodeObj.id,parent_id:this.rightSelectNodeObj.parent_id,name:this.copyNodeName}).then((function(t){var a=t.data;if(e.confirmCopyDisabled=!1,0!=e.rightSelectNodeObj.parent_id){var i=e.rightSelectNode,r=i.parent;r.data.children.push(a)}else e.chapters.push(a);e.$message("复制成功！"),e.dialogVisibleCopy=!1,e.$nextTick((function(){e.$refs.chaptersTree.setCurrentKey(a.id),e.handleNodeClick(e.$refs.chaptersTree.getCurrentNode());var t=JSON.parse(localStorage.getItem("we7_doc_user_"+e.UserInfo.id)),i=t["document_"+e.$route.params.id];e.defaultExpanded=i.defaultExpanded,e.defaultExpanded.push(a.id)}))}))):this.$message("章节名称不能为空！")},confirmBtn:function(){var e=this;this.addNodeObj.name?(this.confirmDisabled=!0,"新建目录"==this.dialogTitle&&(this.formCompared="",this.markDownContentCompared="",this.apiResTreeDataCompared=[],this.apiResTreeDataCompared.push({description:"",data:[]}),Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["a"])({document_id:this.$route.params.id,parent_id:this.addFirst?0:this.rightSelectNode.data.id,is_dir:this.addNodeObj.is_dir,layout:this.addNodeObj.layout,name:this.addNodeObj.name}).then((function(t){e.chapter_id=t.data.id,e.confirmDisabled=!1;var a=t.data;if(e.addFirst)e.chapters.push(a);else{var i=e.rightSelectNodeObj;i.children||e.$set(i,"children",[]),i.children.push(a)}e.$message("新增成功！"),e.dialogVisible=!1})).catch((function(){e.dialogVisible=!1,e.confirmDisabled=!1}))),"新建文档"==this.dialogTitle&&(this.formCompared="",this.markDownContentCompared="",this.apiResTreeDataCompared=[],this.apiResTreeDataCompared.push({description:"",data:[]}),Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["a"])({document_id:this.$route.params.id,parent_id:this.addFirst?0:this.rightSelectNode.data.id,is_dir:this.addNodeObj.is_dir,layout:this.addNodeObj.layout,name:this.addNodeObj.name}).then((function(t){e.chapter_id=t.data.id,e.confirmDisabled=!1;var a=t.data;if(e.addFirst)e.chapters.push(a);else{var i=e.rightSelectNodeObj;i.children||e.$set(i,"children",[]),i.children.push(a)}e.$message("新增成功！"),e.emptyForm(),e.isDocEmpty=!1,e.dialogVisible=!1,e.$nextTick((function(){e.$refs.chaptersTree.setCurrentKey(a.id),e.handleNodeClick(e.$refs.chaptersTree.getCurrentNode());var t=JSON.parse(localStorage.getItem("we7_doc_user_"+e.UserInfo.id)),i=t["document_"+e.$route.params.id];e.defaultExpanded=i.defaultExpanded,e.defaultExpanded.push(a.id)}))})).catch((function(){e.dialogVisible=!1,e.confirmDisabled=!1}))),"重命名"==this.dialogTitle&&this.$post("/admin/chapter/update",{document_id:this.$route.params.id,chapter_id:this.rightSelectNodeObj.id,name:this.addNodeObj.name}).then((function(){e.$message("修改成功！"),e.rightSelectNodeObj.name=e.addNodeObj.name,e.dialogVisible=!1,e.confirmDisabled=!1;var t=e.docTitle,a=localStorage.rename;t==a&&(e.docTitle=e.addNodeObj.name)})).catch((function(){e.dialogVisible=!1,e.confirmDisabled=!1}))):this.$message("章节名称不能为空！")},removeNode:function(){var e=this,t=[];if(t.push(this.rightSelectNodeObj.id),this.rightSelectNodeObj.is_dir&&this.rightSelectNodeObj.children&&this.rightSelectNodeObj.children.length){var a=function e(a){a.forEach((function(a){t.push(a.id),a.children&&a.children.length&&e(a.children)}))};a(this.rightSelectNodeObj.children)}this.$confirm("确定删除该章节吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$post("/admin/chapter/delete",{document_id:e.$route.params.id,chapter_id:t}).then((function(){if(localStorage["currentData_"+e.$route.params.id]){var a=JSON.parse(localStorage["currentData_"+e.$route.params.id]);if(a){var i=a.id;t.forEach((function(t){t===i&&(localStorage["currentData_"+e.$route.params.id]="")}))}}var r=e.rightSelectNode,n=e.rightSelectNodeObj,s=r.parent,o=s.data.children||s.data,l=o.findIndex((function(e){return e.id===n.id}));o.splice(l,1),e.$message("删除成功！"),e.selectNodeObj={},e.isDelete=!0,e.getChapters()}))})).catch((function(){}))},handleDrop:function(e,t,a){var i=this;this.$post("/admin/chapter/sort",{document_id:this.$route.params.id,chapter_id:e.data.id,target:{chapter_id:t.data.id,parent_id:t.data.parent_id,position:a}}).then((function(){i.$message("修改成功！")}))},allowDrop:function(e,t,a){if(t.data.is_dir||"inner"!==a)return!0},openMoveDialog:function(e){this.dialogMoveTitle=e?"移动目录":"移动文档",this.moveDoc="",this.moveClass="",this.dialogMoveVisible=!0},remoteMethod:function(e){var t=this;""!==e?this.$post("/admin/document/all",{keyword:e}).then((function(e){t.docList=e.data.data})):this.options=[]},changeDoc:function(e){var t=this;this.$post("/admin/chapter/detail",{document_id:e}).then((function(e){t.docChapters=t.deleteA(t.deleteA(e.catalog))}))},deleteA:function(e){if(e.length)for(var t=e.length-1;t>=0;t--)e[t]["is_dir"]?e[t].children&&!e[t].children.length?delete e[t].children:e[t].children&&this.deleteA(e[t]["children"]):e.splice(t,1);return e},moveNode:function(){var e=this;if(this.moveDoc){var t=0;1==this.moveClass.length?t=this.moveClass[0]:2==this.moveClass.length&&(t=this.moveClass[1]),this.$post("/admin/chapter/sort",{document_id:this.$route.params.id,chapter_id:this.rightSelectNodeObj.id,target:{document_id:this.moveDoc,chapter_id:t,position:"move"}}).then((function(){e.$message("移动成功！"),e.dialogMoveVisible=!1,e.getChapters()}))}else this.$message("项目不能为空！")},defaultFile:function(){var e=this;this.$post("/admin/chapter/default-show",{document_id:this.$route.params.id,chapter_id:this.rightSelectNodeObj.parent_id,show_chapter_id:this.rightSelectNodeObj.id}).then((function(){e.getChapters(),e.$message("设置默认文档成功！")}))},handleClose:function(){this.getChapters(),this.showSetting=!1},getMethodType:function(){var e=this;Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["f"])({}).then((function(t){t.data&&t.data.methodLabel&&(e.methodArr=t.data.methodLabel.option)}))},tabRequest:function(e){localStorage.tab_location=e.name,this.refreshRequestMock()},paramNameChange:function(e,t){t.name.length&&(t.already=Number(t.already)+1,1==t.already&&this.insertAfter(e,t))},resParamNameChange:function(e,t){t.name.length&&(t.already=Number(t.already)+1,1==t.already&&this.insertAfter(e,t))},addFirstNode:function(){var e=JSON.parse(JSON.stringify(this.baseRequestData)),t=this;function a(a){var i=a.length-1;""==a[i].name&&""==a[i].description?t.$message.warning("已存在空白行，请勿再次添加！"):a.push(e)}var i=this.form.tab_location;1==i?a(this.apiHeaderTreeData):2==i?a(this.apiParamsTreeData):3==i&&a(this.apiBodyTreeData)},addResFirstNode:function(){var e=this,t=JSON.parse(JSON.stringify(this.baseRequestData));function a(a){var i=a.length-1;""==a[i].name&&""==a[i].description?e.$message.warning("已存在空白行，请勿再次添加！"):a.push(t)}a(this.apiResTreeData)},addApiTreeNode:function(e){var t={id:id++,already:0,isChecked:!1,name:"",type:1,enabled:2,default_value:"",description:"",rule:"",children:[]};e.children||this.$set(e,"children",[]),4==e.type||5==e.type?e.children.push(t):this.$message.warning("参数类型为Object或者为Array才可添加！")},addResApiTreeNode:function(e){var t={id:id++,already:0,isChecked:!1,name:"",type:1,enabled:2,default_value:"",description:"",rule:"",children:[]};e.children||this.$set(e,"children",[]),4==e.type||5==e.type?e.children.push(t):this.$message.warning("参数类型为Object或者为Array才可添加！")},removeApiTreeNode:function(e,t){var a=this.apiHeaderTreeData.length,i=this.apiParamsTreeData.length,r=this.apiBodyTreeData.length,n=this.form.tab_location;if(1==n&&1==a&&1==e.level)return this.$message.closeAll(),this.$message.error("已经是最后一个了，勿删！"),!1;if(2==n&&1==i&&1==e.level)return this.$message.closeAll(),this.$message.error("已经是最后一个了，勿删！"),!1;if(3==n&&1==r&&1==e.level)return this.$message.closeAll(),this.$message.error("已经是最后一个了，勿删！"),!1;var s=e.parent,o=s.data.children||s.data,l=o.findIndex((function(e){return e.id===t.id}));o.splice(l,1)},removeResApiTreeNode:function(e,t,a){var i=this.apiResTreeData[a].data.length;if(1==i&&1==e.level)return this.$message.closeAll(),this.$message.error("已经是最后一个了，勿删！"),!1;var r=e.parent,n=r.data.children||r.data,s=n.findIndex((function(e){return e.id===t.id}));n.splice(s,1)},insertAfter:function(e,t){var a=e.parent,i={id:id++,already:0,isChecked:!1,name:"",type:1,enabled:2,default_value:"",description:"",rule:"",children:[]};Array.isArray(a.data)?a.data.push(i):a.data.children.push(i)},saveApi:function(){var e=this,t=(this.form.tab_location,this.form.body_param_location,""),a={},i={};i={},i["1"]=this.apiHeaderTreeData,i["2"]=this.apiParamsTreeData,i["request_body"]=this.apiBodyTreeData,a.api=this.form,a.body=i,a.reponse=this.apiResTreeData,a.extend=this.markDownContent,t=this.chapter_id,1==this.layout?Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["m"])({document_id:this.$route.params.id,chapter_id:t,layout:1,record:a}).then((function(t){200==t.code&&(e.$message.closeAll(),e.$message.success("保存成功！"),e.isFormChange=!1,e.isApiHeaderTreeDataChange=!1,e.isApiParamsTreeDataChange=!1,e.isApiBodyTreeDataChange=!1,e.isApiResTreeDataChange=!1,e.isMarkDownContentChange=!1)})):Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["m"])({document_id:this.$route.params.id,chapter_id:t,layout:0,content:this.markDownContent}).then((function(t){200==t.code&&(e.$message.closeAll(),e.$message.success("保存成功！"),e.isFormChange=!1,e.isApiHeaderTreeDataChange=!1,e.isApiParamsTreeDataChange=!1,e.isApiBodyTreeDataChange=!1,e.isApiResTreeDataChange=!1,e.isMarkDownContentChange=!1)}))},emptyForm:function(){this.docTitle="",this.form=this.formCopy,this.apiHeaderTreeData=this.apiTreeDataCopy,this.apiParamsTreeData=this.apiTreeDataCopy,this.apiBodyTreeData=this.apiTreeDataCopy,this.apiResTreeData=this.apiResTreeDataCopy,this.markDownContent=""},viewChapter:function(){var e=this,t=this.chapter_id,a=this.$route.params.id;this.loading=this.$loading(),Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["o"])({chapter_id:t,document_id:a}).then((function(a){if(e.loading.close(),e.defaultCheckedKeys=[t],200==a.code)if(e.layout=a.data.layout,1==a.data.layout){var i=JSON.parse(JSON.stringify(a.data.record)),r=JSON.parse(JSON.stringify(e.baseRequestData)),n=JSON.parse(JSON.stringify(e.baseRequestData)),s=JSON.parse(JSON.stringify(e.baseRequestData)),o=JSON.parse(JSON.stringify(e.baseRequestData));if(i.api?(e.formCompared=JSON.parse(JSON.stringify(i.api)),e.formCompared.url||(e.formCompared=""),e.form=JSON.parse(JSON.stringify(i.api)),e.form.tab_location=localStorage.tab_location||e.form.tab_location.toString(),e.form.body_param_location=e.form.body_param_location,e.mockApiUrl2=location.origin+"/mock/".concat(e.$route.params.id,"/").concat(t),e.mockApiUrl=location.origin+"/document/mockApiReponse/".concat(e.$route.params.id)+"/"+e.form.url):(e.formCompared="",e.form=JSON.parse(JSON.stringify(e.formCopy))),i.body[1].length?(e.apiHeaderTreeData=JSON.parse(JSON.stringify(i.body["1"])),e.apiHeaderTreeDataCompared=JSON.parse(JSON.stringify(i.body["1"])),e.apiHeaderTreeData.push(r)):(e.apiHeaderTreeDataCompared="",e.apiHeaderTreeData=[r]),i.body[2].length?(e.apiParamsTreeData=JSON.parse(JSON.stringify(i.body["2"])),e.apiParamsTreeDataCompared=JSON.parse(JSON.stringify(i.body["2"])),e.apiParamsTreeData.push(n)):(e.apiParamsTreeDataCompared="",e.apiParamsTreeData=[n]),i.body.request_body.length?(e.apiBodyTreeData=JSON.parse(JSON.stringify(i.body.request_body)),e.apiBodyTreeDataCompared=JSON.parse(JSON.stringify(i.body.request_body)),e.apiBodyTreeData.push(s)):(e.apiBodyTreeDataCompared="",e.apiBodyTreeData=[s]),i.reponse.length)e.apiResTreeData=JSON.parse(JSON.stringify(i.reponse)),e.apiResTreeData.forEach((function(e){e.data.push(JSON.parse(JSON.stringify(o)))})),e.apiResTreeDataCompared=JSON.parse(JSON.stringify(i.reponse));else{var l=JSON.parse(JSON.stringify(e.baseRequestData));e.apiResTreeDataCompared=[],e.apiResTreeDataCompared.push({description:"",data:[]}),e.apiResTreeData=[{description:"",data:[l]}]}null==i.extend?(e.markDownContent="",e.markDownContentCompared=""):(e.markDownContent=JSON.parse(JSON.stringify(i.extend)),e.markDownContentCompared=JSON.parse(JSON.stringify(i.extend)))}else null==a.data.content?(e.markDownContent="",e.markDownContentCompared=""):(e.markDownContent=a.data.content,e.markDownContentCompared=a.data.content)})).catch((function(t){e.loading.close()}))},addResNode:function(){var e=JSON.parse(JSON.stringify(this.baseRequestData));this.apiResTreeData.push({description:"",data:[e]})},deleteApiItem:function(e){var t=this;this.$confirm("确认删除该数据吗?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.apiResTreeData.splice(e,1)})).catch((function(){t.$message({type:"info",message:"已取消"})}))},typeChange:function(e){4!=e.type&&5!=e.type||(e.default_value="")},viewRequestMock:function(){this.isViewRequest=!0,this.isViewRequest&&this.refreshRequestMock()},refreshRequestMock:function(){var e=this,t=this.form.tab_location;1==t?(this.requestMockTemplate=treeToTemplate(this.apiHeaderTreeData),this.requestMockJson=this.$mock.mock(treeToTemplate(this.apiHeaderTreeData,1)),this.requestMockJson=romoveSlash(this.requestMockJson)):2==t?(this.requestMockTemplate=treeToTemplate(this.apiParamsTreeData),this.requestMockJson=this.$mock.mock(treeToTemplate(this.apiParamsTreeData,1)),this.requestMockJson=romoveSlash(this.requestMockJson)):(this.requestMockTemplate=treeToTemplate(this.apiBodyTreeData),this.requestMockJson=this.$mock.mock(treeToTemplate(this.apiBodyTreeData,1)),this.requestMockJson=romoveSlash(this.requestMockJson)),this.$nextTick((function(){var t=e.$refs.requestMockLeftHeight.offsetHeight+32,a=e.$refs.requestMockRightHeight.offsetHeight+32;e.requestMockHeight=t>a?t:t<a?a:t}))},viewResponseMock:function(){this.isViewResponse=!0,this.isViewResponse&&this.refreshResponseMock()},refreshResponseMock:function(){var e=this;this.responseMockTemplate=[],this.responseMockJson=[],this.apiResTreeData.forEach((function(t){e.responseMockTemplate.push(treeToTemplate(t.data)),e.responseMockJson.push(e.$mock.mock(treeToTemplate(t.data,1)))}));var t=[];this.responseMockJson.forEach((function(e){t.push(romoveSlash(e))})),this.responseMockJson=t,this.$nextTick((function(){var t=e.$refs.responseMockLeftHeight.offsetHeight+32,a=e.$refs.responseMockRightHeight.offsetHeight+32;e.responseMockHeight=t>a?t:a}))},onCopy:function(e){this.$message.success("复制成功")},goMock:function(){window.open("https://github.com/nuysoft/Mock/wiki/Syntax-Specification")}}}}).call(this,__webpack_require__("1157"))},"5df3":function(e,t,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=i(t,a),this._i+=e.length,{value:e,done:!1})}))},"5eda":function(e,t,a){var i=a("5ca1"),r=a("8378"),n=a("79e5");e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],s={};s[e]=t(a),i(i.S+i.F*n((function(){a(1)})),"Object",s)}},6023:function(e,t,a){"use strict";var i=a("1259"),r=a.n(i);r.a},"67ab":function(e,t,a){var i=a("ca5a")("meta"),r=a("d3f4"),n=a("69a8"),s=a("86cc").f,o=0,l=Object.isExtensible||function(){return!0},c=!a("79e5")((function(){return l(Object.preventExtensions({}))})),d=function(e){s(e,i,{value:{i:"O"+ ++o,w:{}}})},u=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,i)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[i].i},_=function(e,t){if(!n(e,i)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[i].w},p=function(e){return c&&f.NEED&&l(e)&&!n(e,i)&&d(e),e},f=e.exports={KEY:i,NEED:!1,fastKey:u,getWeak:_,onFreeze:p}},7514:function(e,t,a){"use strict";var i=a("5ca1"),r=a("0a49")(5),n="find",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"7bbc":function(e,t,a){var i=a("6821"),r=a("9093").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==n.call(e)?o(e):r(i(e))}},"8a81":function(e,t,a){"use strict";var i=a("7726"),r=a("69a8"),n=a("9e1e"),s=a("5ca1"),o=a("2aba"),l=a("67ab").KEY,c=a("79e5"),d=a("5537"),u=a("7f20"),_=a("ca5a"),p=a("2b4c"),f=a("37c8"),m=a("3a72"),h=a("d4c0"),g=a("1169"),v=a("cb7c"),b=a("d3f4"),y=a("4bf8"),C=a("6821"),k=a("6a99"),O=a("4630"),D=a("2aeb"),w=a("7bbc"),T=a("11e9"),E=a("2621"),N=a("86cc"),S=a("0d58"),M=T.f,A=N.f,x=w.f,P=i.Symbol,$=i.JSON,R=$&&$.stringify,j="prototype",I=p("_hidden"),q=p("toPrimitive"),B={}.propertyIsEnumerable,J=d("symbol-registry"),U=d("symbols"),L=d("op-symbols"),K=Object[j],W="function"==typeof P&&!!E.f,H=i.QObject,V=!H||!H[j]||!H[j].findChild,F=n&&c((function(){return 7!=D(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,a){var i=M(K,t);i&&delete K[t],A(e,t,a),i&&e!==K&&A(K,t,i)}:A,Y=function(e){var t=U[e]=D(P[j]);return t._k=e,t},X=W&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},z=function(e,t,a){return e===K&&z(L,t,a),v(e),t=k(t,!0),v(a),r(U,t)?(a.enumerable?(r(e,I)&&e[I][t]&&(e[I][t]=!1),a=D(a,{enumerable:O(0,!1)})):(r(e,I)||A(e,I,O(1,{})),e[I][t]=!0),F(e,t,a)):A(e,t,a)},G=function(e,t){v(e);var a,i=h(t=C(t)),r=0,n=i.length;while(n>r)z(e,a=i[r++],t[a]);return e},Q=function(e,t){return void 0===t?D(e):G(D(e),t)},Z=function(e){var t=B.call(this,e=k(e,!0));return!(this===K&&r(U,e)&&!r(L,e))&&(!(t||!r(this,e)||!r(U,e)||r(this,I)&&this[I][e])||t)},ee=function(e,t){if(e=C(e),t=k(t,!0),e!==K||!r(U,t)||r(L,t)){var a=M(e,t);return!a||!r(U,t)||r(e,I)&&e[I][t]||(a.enumerable=!0),a}},te=function(e){var t,a=x(C(e)),i=[],n=0;while(a.length>n)r(U,t=a[n++])||t==I||t==l||i.push(t);return i},ae=function(e){var t,a=e===K,i=x(a?L:C(e)),n=[],s=0;while(i.length>s)!r(U,t=i[s++])||a&&!r(K,t)||n.push(U[t]);return n};W||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=_(arguments.length>0?arguments[0]:void 0),t=function(a){this===K&&t.call(L,a),r(this,I)&&r(this[I],e)&&(this[I][e]=!1),F(this,e,O(1,a))};return n&&V&&F(K,e,{configurable:!0,set:t}),Y(e)},o(P[j],"toString",(function(){return this._k})),T.f=ee,N.f=z,a("9093").f=w.f=te,a("52a7").f=Z,E.f=ae,n&&!a("2d00")&&o(K,"propertyIsEnumerable",Z,!0),f.f=function(e){return Y(p(e))}),s(s.G+s.W+s.F*!W,{Symbol:P});for(var ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ie.length>re;)p(ie[re++]);for(var ne=S(p.store),se=0;ne.length>se;)m(ne[se++]);s(s.S+s.F*!W,"Symbol",{for:function(e){return r(J,e+="")?J[e]:J[e]=P(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in J)if(J[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!W,"Object",{create:Q,defineProperty:z,defineProperties:G,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ae});var oe=c((function(){E.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return E.f(y(e))}}),$&&s(s.S+s.F*(!W||c((function(){var e=P();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){var t,a,i=[e],r=1;while(arguments.length>r)i.push(arguments[r++]);if(a=t=i[1],(b(t)||void 0!==e)&&!X(e))return g(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!X(t))return t}),i[1]=t,R.apply($,i)}}),P[j][q]||a("32e9")(P[j],q,P[j].valueOf),u(P,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},"8e6e":function(e,t,a){var i=a("5ca1"),r=a("990b"),n=a("6821"),s=a("11e9"),o=a("f1ae");i(i.S,"Object",{getOwnPropertyDescriptors:function(e){var t,a,i=n(e),l=s.f,c=r(i),d={},u=0;while(c.length>u)a=l(i,t=c[u++]),void 0!==a&&o(d,t,a);return d}})},9459:function(e,t,a){"use strict";var i=a("c773"),r=a.n(i);r.a},"990b":function(e,t,a){var i=a("9093"),r=a("2621"),n=a("cb7c"),s=a("7726").Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(n(e)),a=r.f;return a?t.concat(a(e)):t}},aa77:function(e,t,a){var i=a("5ca1"),r=a("be13"),n=a("79e5"),s=a("fdef"),o="["+s+"]",l="​",c=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),u=function(e,t,a){var r={},o=n((function(){return!!s[e]()||l[e]()!=l})),c=r[e]=o?t(_):s[e];a&&(r[a]=c),i(i.P+i.F*o,"String",r)},_=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},ac4d:function(e,t,a){a("3a72")("asyncIterator")},ade3:function(e,t,a){"use strict";function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return i}))},c5f6:function(e,t,a){"use strict";var i=a("7726"),r=a("69a8"),n=a("2d95"),s=a("5dbc"),o=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,u=a("86cc").f,_=a("aa77").trim,p="Number",f=i[p],m=f,h=f.prototype,g=n(a("2aeb")(h))==p,v="trim"in String.prototype,b=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():_(t,3);var a,i,r,n=t.charCodeAt(0);if(43===n||45===n){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,l=t.slice(2),c=0,d=l.length;c<d;c++)if(s=l.charCodeAt(c),s<48||s>r)return NaN;return parseInt(l,i)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof f&&(g?l((function(){h.valueOf.call(a)})):n(a)!=p)?s(new m(b(t)),a,f):b(t)};for(var y,C=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;C.length>k;k++)r(m,y=C[k])&&!r(f,y)&&u(f,y,d(m,y));f.prototype=h,h.constructor=f,a("2aba")(i,p,f)}},c773:function(e,t,a){},cd1c:function(e,t,a){var i=a("e853");e.exports=function(e,t){return new(i(e))(t)}},ce4d:function(e,t,a){},d4c0:function(e,t,a){var i=a("0d58"),r=a("2621"),n=a("52a7");e.exports=function(e){var t=i(e),a=r.f;if(a){var s,o=a(e),l=n.f,c=0;while(o.length>c)l.call(e,s=o[c++])&&t.push(s)}return t}},e853:function(e,t,a){var i=a("d3f4"),r=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},f1ae:function(e,t,a){"use strict";var i=a("86cc"),r=a("4630");e.exports=function(e,t,a){t in e?i.f(e,t,r(0,a)):e[t]=a}},f93f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editors"},[a("mavon-editor",{ref:"mavonEditor",attrs:{boxShadow:!1,scrollStyle:!0,ishljs:!0,codeStyle:e.code_style,navigation:!1},on:{imgAdd:e.$imgAdd,input:e.input},model:{value:e.contentMd,callback:function(t){e.contentMd=t},expression:"contentMd"}}),a("div")],1)},r=[],n={props:["chapter_id","markDownContent"],data:function(){return{code_style:"tomorrow-night-blue",chapterInfo:{name:"",updated_at:"",username:""},contentMd:"",old_contentMd:"",timer:""}},watch:{markDownContent:function(e){this.contentMd=e}},mounted:function(){var e=document.documentElement.clientHeight;this.$refs.mavonEditor.$el.style.height=e-310+"px"},destroyed:function(){},methods:{input:function(){this.$emit("input",this.contentMd)},$imgAdd:function(e,t){var a=this,i=new FormData;i.append("file",t),i.append("document_id",this.$route.params.id),i.append("chapter_id",this.chapter_id),this.$post("/admin/upload/image",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){a.$refs.mavonEditor.$img2Url(e,t.data.url)})).catch((function(e){}))}}},s=n,o=(a("6023"),a("2877")),l=Object(o["a"])(s,i,r,!1,null,"470f823f",null);t["a"]=l.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);